## 基本概念

堆是一种特殊的树形数据结构，它是一个完全二叉树（Complete Binary Tree），其中每个父节点与其子节点之间满足一定的顺序关系。根据这种顺序关系的不同，堆可以分为以下两种类型：

## 最大堆（Max Heap）：

在最大堆中，对于任意节点i，其值总是大于或等于其左子节点和右子节点的值，即 A[parent(i)] >= A[i] 且 A[parent(i)] >= A[2 * i + 1] 以及 A[parent(i)] >= A[2 * i + 2]。这意味着根节点始终拥有整个堆中的最大值。

## 最小堆（Min Heap）：

在最小堆中，对于任意节点i，其值总是小于或等于其左右子节点的值，即 A[parent(i)] <= A[i] 且 A[parent(i)] <= A[2 * i + 1] 以及 A[parent(i)] <= A[2 * i + 2]。根节点保持堆中的最小值。

## 实现

堆通常采用数组来实现，将完全二叉树按照层级顺序从左到右、从上到下填入数组中，这样可以充分利用数组的随机访问特性，使得堆中的插入、删除和调整等操作更加高效。

## 特点：

1. 局部有序性：堆的节点值与其子节点之间存在大小关系，全局不保证有序，但局部是有序的。
2. 完全性：堆是完全二叉树，除了最后一层之外，每一层都被完全填充，且所有的叶子节点都尽可能集中在左边。
3. 顶端性质：堆的根节点具有堆属性的最大或最小值。
4. 时间效率：插入、删除（尤其是删除堆顶元素）操作的时间复杂度通常是O(log n)，其中n为堆中元素的数量。

## 应用场景：

- 优先队列（Priority Queue）：堆是最常用的优先队列实现方式之一，可以高效地执行插入、删除操作，并始终保持队列头部元素具有最高（或最低）优先级。
- 堆排序（Heap Sort）：堆排序是一种基于比较的排序算法，利用堆的特性，可以达到O(n log n)的时间复杂度。
- 资源管理：例如内存分配、任务调度等场景，可以根据任务或资源的优先级使用堆来组织数据结构，确保优先级高的任务或请求能够被优先处理。
- 图算法：在某些图算法中，比如Prim最小生成树算法或Dijkstra单源最短路径算法中，使用最小堆来保存待处理节点及其估计距离。
- Top-K问题：找出一个集合中最大的K个数或最小的K个数，可以通过构建大小为K的堆来高效实现。

总结起来，堆作为一种重要的数据结构，在解决优先级排序、资源分配、求解最优解等问题上具有不可替代的作用。其内在的逻辑简洁且操作高效，使得堆在软件开发和算法设计中非常实用。

## 堆的基本操作：

### 创建堆：

从无到有创建堆，通常是从一个空堆开始，或者从一个非堆结构的数组转换而来。可以采用自下而上或自上而下的方式调整数组元素以满足堆的性质。自下而上的方式通常是从最后一个非叶子节点开始逐个调用下沉操作 siftDown 来维护堆的性质。

### 插入操作（Insertion）：

插入一个新元素到堆中，首先将其放在堆数组的末尾，然后调用上浮操作 siftUp。这个过程涉及将新插入的元素与其父节点比较，若不符合堆的性质，则交换它们的位置，直到新元素到达正确的位置（对于最小堆来说，新元素应该低于其父节点；对于最大堆则是高于其父节点）。

### 删除操作（Deletion）：

删除堆顶元素（对于最大堆来说是最大的元素，对于最小堆来说是最小的元素）。删除堆顶元素后，通常会将堆尾元素移动到堆顶，然后调用下沉操作 siftDown 以恢复堆的性质。下沉操作会从根节点开始，将当前节点与其子节点比较，如果违反堆的性质，则与子节点中较大（对于最小堆是较小）的节点交换位置，递归此过程直至堆的性质得到满足。

### 堆调整（Heapify）：

如果堆中的某个内部节点发生了变化，需要单独调整以重新满足堆的性质，可以针对该节点执行上浮或下沉操作。

### 堆排序：

利用堆的基本操作可以实现堆排序算法，包括构造初始堆、反复删除堆顶元素并重建堆，最终实现整个序列的排序。

### 具体代码实现时，这些操作可能体现为以下函数：

1. heapify(array)：将普通数组转化为堆结构。
2. push(element) 或 insert(element)：在堆中插入一个新元素并维护堆的性质。
3. pop() 或 remove()：移除并返回堆顶元素，并重新调整堆。
4. peek() 或 top()：查看堆顶元素而不改变堆结构。

## 堆的操作时间复杂度分析：

- 创建堆的时间复杂度通常为 O(n)，其中 n 是堆中元素的数量。
- 插入和删除堆顶元素的时间复杂度均为 O(log n)，这是因为堆是一个完全二叉树，高度大致为 log n。
- 查看堆顶元素的时间复杂度为 O(1)，因为它可以直接访问。
